<section class="py-20 bg-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <span class="inline-block px-3 py-1 text-sm font-semibold text-amber-600 bg-amber-100 rounded-full mb-4">
        {{ section.settings.subheading | default: 'Testimonials' }}
      </span>
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
        {{ section.settings.heading | default: 'What Our Clients Say' }}
      </h2>
      <div class="w-20 h-1 bg-gradient-to-r from-amber-400 to-amber-300 mx-auto"></div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {% for block in section.blocks %}
        {% if block.type == 'testimonial' %}
          <div class="bg-white rounded-xl shadow-lg p-8 relative hover:shadow-xl transition-shadow duration-300" {{ block.shopify_attributes }}>
            <!-- Rating -->
            <div class="flex mb-4">
              {% for i in (1..5) %}
                <svg class="h-5 w-5 text-amber-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                </svg>
              {% endfor %}
            </div>
            
            <!-- Testimonial Text -->
            <div class="text-gray-600 italic mb-6">
              {{ block.settings.content | default: 'The team at S&S Flooring did an amazing job on our hardwood floors. The attention to detail was impressive!' }}
            </div>
            
            <!-- Author -->
            <div class="flex items-center">
              <div class="h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold text-lg mr-4">
                {{ block.settings.author | slice: 0, 1 | upcase }}
              </div>
              <div>
                <div class="font-bold text-gray-900">{{ block.settings.author | default: 'Sarah J.' }}</div>
                <div class="text-sm text-gray-500">{{ block.settings.location | default: 'Minneapolis, MN' }}</div>
              </div>
            </div>
            
            <!-- Decorative Elements -->
            <div class="absolute top-6 right-6 text-blue-100 text-6xl font-serif leading-none">"</div>
          </div>
        {% endif %}
      {% else %}
        <!-- Default Testimonials -->
        {% for i in (1..3) %}
          <div class="bg-white rounded-xl shadow-lg p-8 relative hover:shadow-xl transition-shadow duration-300">
            <!-- Rating -->
            <div class="flex mb-4">
              {% for i in (1..5) %}
                <svg class="h-5 w-5 text-amber-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                </svg>
              {% endfor %}
            </div>
            
            <!-- Testimonial Text -->
            <div class="text-gray-600 italic mb-6">
              {% if forloop.index == 1 %}
                The team at S&S Flooring did an amazing job on our hardwood floors. The attention to detail was impressive!
              {% elsif forloop.index == 2 %}
                We couldn't be happier with our new vinyl plank flooring. The installation was quick and professional.
              {% else %}
                Excellent service from start to finish. The team was punctual, professional, and left our home spotless.
              {% endif %}
            </div>
            
            <!-- Author -->
            <div class="flex items-center">
              <div class="h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold text-lg mr-4">
                {% if forloop.index == 1 %}S{% elsif forloop.index == 2 %}M{% else %}J{% endif %}
              </div>
              <div>
                <div class="font-bold text-gray-900">{% if forloop.index == 1 %}Sarah J.{% elsif forloop.index == 2 %}Mike T.{% else %}Jennifer L.{% endif %}</div>
                <div class="text-sm text-gray-500">{% if forloop.index == 1 %}Minneapolis, MN{% elsif forloop.index == 2 %}St. Paul, MN{% else %}Edina, MN{% endif %}</div>
              </div>
            </div>
            
            <!-- Decorative Elements -->
            <div class="absolute top-6 right-6 text-blue-100 text-6xl font-serif leading-none">"</div>
          </div>
        {% endfor %}
      {% endfor %}
    </div>
    
    <!-- CTA -->
    <div class="mt-16 text-center">
      <h3 class="text-2xl font-bold text-gray-900 mb-4">{{ section.settings.cta_heading | default: 'Ready to Experience the Difference?' }}</h3>
      <p class="text-gray-600 max-w-2xl mx-auto mb-8">{{ section.settings.cta_text | default: 'Join our growing list of satisfied customers. Contact us today for a free consultation.' }}</p>
      <a href="{{ section.settings.cta_button_link | default: '/contact' }}" class="inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-full shadow-sm text-white bg-blue-900 hover:bg-blue-800 transition-colors">
        {{ section.settings.cta_button_text | default: 'Get Your Free Estimate' }}
        <svg class="ml-2 -mr-1 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
        </svg>
      </a>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Testimonials Section",
  "settings": [
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Testimonials"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "What Our Clients Say"
    },
    {
      "type": "header",
      "content": "Call to Action"
    },
    {
      "type": "text",
      "id": "cta_heading",
      "label": "CTA Heading",
      "default": "Ready to Experience the Difference?"
    },
    {
      "type": "textarea",
      "id": "cta_text",
      "label": "CTA Text",
      "default": "Join our growing list of satisfied customers. Contact us today for a free consultation."
    },
    {
      "type": "text",
      "id": "cta_button_text",
      "label": "CTA Button Text",
      "default": "Get Your Free Estimate"
    },
    {
      "type": "url",
      "id": "cta_button_link",
      "label": "CTA Button Link"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "richtext",
          "id": "content",
          "label": "Testimonial Content",
          "default": "<p>The team at S&S Flooring did an amazing job on our hardwood floors. The attention to detail was impressive!</p>"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author Name",
          "default": "Sarah J."
        },
        {
          "type": "text",
          "id": "location",
          "label": "Location",
          "default": "Minneapolis, MN"
        },
        {
          "type": "range",
          "id": "rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "label": "Rating",
          "default": 5
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials Section",
      "category": "Content",
      "blocks": [
        {
          "type": "testimonial",
          "settings": {
            "content": "<p>The team at S&S Flooring did an amazing job on our hardwood floors. The attention to detail was impressive!</p>",
            "author": "Sarah J.",
            "location": "Minneapolis, MN",
            "rating": 5
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "content": "<p>We couldn't be happier with our new vinyl plank flooring. The installation was quick and professional.</p>",
            "author": "Mike T.",
            "location": "St. Paul, MN",
            "rating": 5
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "content": "<p>Excellent service from start to finish. The team was punctual, professional, and left our home spotless.</p>",
            "author": "Jennifer L.",
            "location": "Edina, MN",
            "rating": 5
          }
        }
      ]
    }
  ]
}
{% endschema %}

{% javascript %}
document.addEventListener('DOMContentLoaded', function() {
  // Initialize any testimonial sliders or animations here
  const testimonials = document.querySelectorAll('.testimonial-slide');
  let currentIndex = 0;
  
  function showTestimonial(index) {
    testimonials.forEach((testimonial, i) => {
      testimonial.classList.toggle('hidden', i !== index);
    });
  }
  
  // Auto-rotate testimonials
  if (testimonials.length > 1) {
    setInterval(() => {
      currentIndex = (currentIndex + 1) % testimonials.length;
      showTestimonial(currentIndex);
    }, 8000);
  }
});
{% endjavascript %}
